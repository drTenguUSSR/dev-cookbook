# 05.guest-gui.md

## Минимальная настройка XFCE для максимальной производительности

```bash
# Установка
sudo apt install -y xfce4 xfce4-goodies xorg xserver-xorg-video-dummy \
    dbus-x11 libxrender1 libxtst6 libxi6

# Отключение тяжёлых эффектов
xfconf-query -c xfwm4 -p /general/use_compositing -s false
xfconf-query -c xfwm4 -p /general/vblank_mode -s "off"

# Настройка масштабирования (если требуется)
xfconf-query -c xsettings -p /Gdk/WindowScalingFactor -s 1
# Или для HiDPI:
xfconf-query -c xsettings -p /Gdk/WindowScalingFactor -s 2

# Автозапуск при подключении через Enhanced Session
echo "startxfce4" > ~/.xsession
chmod +x ~/.xsession
```

## JVM-опции IDEA (idea64.vmoptions)

```ini
-Xms1024m
-Xmx4096m
-XX:+UseG1GC
-Dsun.java2d.opengl=false    # Отключить OpenGL (плохо работает в виртуалке)
-Dsun.java2d.xrender=true    # Использовать XRender через Xorg
```

## дополнение

Для кэшей IDEA: при возможности — вынос в tmpfs (RAM disk) - reserved

```bash
# /etc/fstab
tmpfs /home/user/.cache/JetBrains tmpfs defaults,size=4G 0 0
```

Для максимальной отзывчивости IDEA

```bash
# В ~/.xsessionrc перед запуском XFCE
export _JAVA_AWT_WM_NONREPARENTING=1  # Устраняет артефакты рендеринга в XFCE
```